@prefix schema:   <http://schema.org/> .
@prefix xsd:      <http://www.w3.org/2001/XMLSchema#>.
@prefix rr:       <http://www.w3.org/ns/r2rml#>.
@prefix rml:      <http://semweb.mmlab.be/ns/rml#> .
@prefix ql:       <http://semweb.mmlab.be/ns/ql#> .
@prefix rdfs:     <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms:  <http://purl.org/dc/terms/>.
@prefix ex:     <http://example.com/>.  


<#Employee>
  
  rml:logicalSource [ 
    rml:source "https://raw.githubusercontent.com/w3c/csvw/gh-pages/examples/tests/scenarios/chinook/csv/Employee.csv";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [ 
    rr:template "http://example.com/employee/{EmployeeId}"; 
    rr:class schema:Person
  ];

  rr:predicateObjectMap [
    rr:predicate schema:familyName;
    rr:objectMap [ 
      rml:reference "LastName"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:givenName;
    rr:objectMap [ 
      rml:reference "FirstName"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate ex:reportsTo;
    rr:objectMap [
      rml:reference "ReportsTo" 
      ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:birthDate;
    rr:objectMap [ 
      rml:reference "BirthDate"
    ]
  ];

  rr:predicateObjectMap [
        rr:predicate schema:address;
        rr:objectMap [
            rr:parentTriplesMap <#EmployeeAddress>;
        ]
    ].


<#EmployeeAddress>
  
  rml:logicalSource [ 
    rml:source "https://raw.githubusercontent.com/w3c/csvw/gh-pages/examples/tests/scenarios/chinook/csv/Employee.csv";
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [ 
    rr:termType rr:BlankNode; 
    rr:class schema:PostalAddress
  ];

  rr:predicateObjectMap [
    rr:predicate schema:streetAdress;
    rr:objectMap [ 
      rml:reference "Address"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:addressLocality;
    rr:objectMap [ 
      rml:reference "City"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:addressRegion;
    rr:objectMap [ 
      rml:reference "State"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:addressCountry;
    rr:objectMap [ 
      rml:reference "Country"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:postalCode;
    rr:objectMap [ 
      rml:reference "PostalCode"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:telephone;
    rr:objectMap [ 
      rml:reference "Phone"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:faxNumber;
    rr:objectMap [ 
      rml:reference "Fax"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate schema:email;
    rr:objectMap [ 
      rml:reference "Email"
    ]
  ].